<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#eeeeee" />
    <link rel="manifest" href="manifest.json">
    <link href="style.css" rel="stylesheet" />
    <title>Radio</title>
    <script>
        function setMetadata(stationTitle, imageUrl) {
            console.log("Attempting to set media metadata: " + stationTitle + ": " + imageUrl)
            if ("mediaSession" in navigator) {
                navigator.mediaSession.metadata = new MediaMetadata({
                    title: stationTitle,
                    artwork: [{src: imageUrl}]
                });

                try {
                    navigator.mediaSession.setActionHandler('stop', function() {
                        var footer = document.getElementById('footer');
                        footer.style.display = 'none';
                    });
                } catch(error) {
                    console.log('Warning! The "stop" media session action is not supported.');
                }
            }
        }
    </script>
</head>
<body>
<header>
    <button id="back_button">
        <img src="assets/back.svg">
    </button>
    <svg width="68" height="19" viewBox="0 0 68 19" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M4.00001 8.44154V3.18844H8.38219C9.29939 3.18844 9.98729 3.39752 10.4459 3.81568C10.9045 4.21641 11.1338 4.86978 11.1338 5.77579C11.1338 6.71664 10.9045 7.39614 10.4459 7.8143C9.98729 8.23245 9.29939 8.44154 8.38219 8.44154H4.00001ZM0 0V18.6602H4.00001V11.3686H8.00002C9.00214 11.3686 9.72402 11.5951 10.1656 12.0481C10.6072 12.5011 10.896 13.2155 11.0319 14.1912C11.1338 14.9404 11.2102 15.7244 11.2612 16.5433C11.3121 17.3622 11.448 18.0679 11.6688 18.6602H15.6688C15.482 18.3989 15.3376 18.0853 15.2357 17.7194C15.1508 17.3361 15.0828 16.9353 15.0319 16.5172C14.9979 16.099 14.9724 15.6896 14.9554 15.2888C14.9385 14.8881 14.9215 14.5397 14.9045 14.2435C14.8705 13.773 14.8026 13.3026 14.7007 12.8322C14.6157 12.3618 14.4714 11.9349 14.2675 11.5516C14.0637 11.1508 13.8005 10.8111 13.4777 10.5323C13.155 10.2361 12.7474 10.0183 12.2548 9.87894V9.82668C13.2739 9.40853 14.0043 8.79871 14.4459 7.99724C14.9045 7.19577 15.1338 6.24621 15.1338 5.14855C15.1338 4.4342 15.0064 3.77211 14.7516 3.1623C14.5138 2.53507 14.1572 1.98624 13.6816 1.51582C13.223 1.04539 12.6625 0.679507 12 0.41816C11.3546 0.139388 10.6242 0 9.80894 0H0Z" fill="black"/>
        <path d="M17.8599 9.30398C17.9108 8.43282 18.1231 7.70977 18.4968 7.1348C18.8705 6.55984 19.3461 6.09812 19.9236 5.74965C20.5011 5.40119 21.1465 5.15727 21.8599 5.01788C22.5902 4.86107 23.3206 4.78267 24.051 4.78267C24.7134 4.78267 25.3843 4.83493 26.0637 4.93947C26.7431 5.02659 27.3631 5.20953 27.9236 5.4883C28.4841 5.76707 28.9427 6.15909 29.2994 6.66437C29.6561 7.15222 29.8344 7.80559 29.8344 8.62448V15.6547C29.8344 16.2645 29.8684 16.8482 29.9363 17.4058C30.0043 17.9633 30.1232 18.3815 30.293 18.6602H26.6242C26.5563 18.4512 26.4968 18.2421 26.4459 18.033C26.4119 17.8065 26.3864 17.58 26.3694 17.3535C25.7919 17.9633 25.1125 18.3902 24.3312 18.6341C23.5499 18.878 22.7516 19 21.9363 19C21.3079 19 20.7219 18.9216 20.1783 18.7648C19.6348 18.608 19.1592 18.364 18.7516 18.033C18.3439 17.702 18.0212 17.2838 17.7834 16.7785C17.5626 16.2733 17.4522 15.6722 17.4522 14.9752C17.4522 14.2086 17.5796 13.5814 17.8344 13.0935C18.1061 12.5883 18.4459 12.1875 18.8535 11.8913C19.2781 11.5951 19.7537 11.3773 20.2803 11.238C20.8238 11.0811 21.3673 10.9592 21.9108 10.8721C22.4543 10.785 22.9894 10.7153 23.5159 10.663C24.0425 10.6107 24.5096 10.5323 24.9172 10.4278C25.3248 10.3232 25.6476 10.1751 25.8854 9.98349C26.1231 9.77441 26.2335 9.47821 26.2166 9.0949C26.2166 8.69416 26.1486 8.38055 26.0127 8.15405C25.8938 7.91012 25.724 7.72718 25.5032 7.60522C25.2994 7.46583 25.0531 7.37873 24.7643 7.34388C24.4926 7.29161 24.1953 7.26547 23.8726 7.26547C23.1592 7.26547 22.5987 7.42227 22.1911 7.73589C21.7834 8.0495 21.5456 8.5722 21.4777 9.30398H17.8599ZM26.2166 12.0481C26.0637 12.1875 25.8684 12.3008 25.6306 12.3879C25.4098 12.4576 25.1635 12.5186 24.8917 12.5708C24.6369 12.6231 24.3652 12.6667 24.0764 12.7015C23.7877 12.7364 23.4989 12.7799 23.2102 12.8322C22.9384 12.8844 22.6667 12.9541 22.3949 13.0413C22.1401 13.1284 21.9108 13.2503 21.707 13.4071C21.5202 13.5465 21.3673 13.7295 21.2484 13.956C21.1295 14.1825 21.0701 14.47 21.0701 14.8184C21.0701 15.1495 21.1295 15.4282 21.2484 15.6547C21.3673 15.8812 21.5287 16.0642 21.7325 16.2036C21.9363 16.3255 22.1741 16.4126 22.4459 16.4649C22.7176 16.5172 22.9979 16.5433 23.2866 16.5433C24 16.5433 24.552 16.4214 24.9427 16.1774C25.3333 15.9335 25.6221 15.646 25.8089 15.315C25.9958 14.9665 26.1062 14.618 26.1401 14.2696C26.1911 13.9211 26.2166 13.6424 26.2166 13.4333V12.0481Z" fill="black"/>
        <path d="M41.9873 11.8652C41.9873 12.4227 41.9363 12.9629 41.8344 13.4856C41.7325 14.0083 41.5627 14.4787 41.3249 14.8968C41.0871 15.2976 40.7644 15.6199 40.3567 15.8638C39.9661 16.1077 39.4735 16.2297 38.879 16.2297C38.3185 16.2297 37.8344 16.1077 37.4268 15.8638C37.0361 15.6025 36.7049 15.2714 36.4331 14.8707C36.1784 14.4525 35.9915 13.9821 35.8726 13.4594C35.7537 12.9367 35.6943 12.414 35.6943 11.8913C35.6943 11.3338 35.7452 10.8024 35.8472 10.2971C35.9661 9.77441 36.1444 9.31269 36.3822 8.91195C36.637 8.51122 36.9682 8.18889 37.3758 7.94497C37.7835 7.70104 38.2845 7.57908 38.879 7.57908C39.4735 7.57908 39.9661 7.70104 40.3567 7.94497C40.7474 8.18889 41.0616 8.51122 41.2994 8.91195C41.5542 9.29526 41.7325 9.74827 41.8344 10.271C41.9363 10.7762 41.9873 11.3076 41.9873 11.8652ZM42.0383 16.9353V18.6602H45.4777V0H41.8599V6.79504H41.809C41.4013 6.13295 40.8408 5.6364 40.1274 5.30536C39.431 4.95689 38.6922 4.78267 37.9109 4.78267C36.9427 4.78267 36.0934 4.98303 35.3631 5.38377C34.6327 5.76708 34.0212 6.28106 33.5287 6.92572C33.0531 7.57038 32.6879 8.31957 32.4331 9.17331C32.1953 10.0096 32.0764 10.8808 32.0764 11.7868C32.0764 12.7276 32.1953 13.6336 32.4331 14.5048C32.6879 15.376 33.0531 16.1513 33.5287 16.8308C34.0212 17.4929 34.6412 18.0243 35.3886 18.425C36.1359 18.8083 37.0021 19 37.9873 19C38.8535 19 39.6264 18.8432 40.3058 18.5296C41.0022 18.1985 41.5627 17.6671 41.9873 16.9353H42.0383Z" fill="black"/>
        <path d="M51.9236 3.05777V0H48.3057V3.05777H51.9236ZM48.3057 5.14855V18.6602H51.9236V5.14855H48.3057Z" fill="black"/>
        <path d="M57.9873 11.9175C57.9873 11.3773 58.0382 10.8459 58.1401 10.3232C58.2421 9.80054 58.4119 9.33882 58.6497 8.93809C58.9045 8.53736 59.2357 8.21503 59.6433 7.9711C60.051 7.70976 60.5605 7.57908 61.172 7.57908C61.7835 7.57908 62.293 7.70976 62.7007 7.9711C63.1253 8.21503 63.4565 8.53736 63.6943 8.93809C63.9491 9.33882 64.1274 9.80054 64.2293 10.3232C64.3312 10.8459 64.3822 11.3773 64.3822 11.9175C64.3822 12.4576 64.3312 12.989 64.2293 13.5117C64.1274 14.0169 63.9491 14.4787 63.6943 14.8968C63.4565 15.2976 63.1253 15.6199 62.7007 15.8638C62.293 16.1077 61.7835 16.2297 61.172 16.2297C60.5605 16.2297 60.051 16.1077 59.6433 15.8638C59.2357 15.6199 58.9045 15.2976 58.6497 14.8968C58.4119 14.4787 58.2421 14.0169 58.1401 13.5117C58.0382 12.989 57.9873 12.4576 57.9873 11.9175ZM54.3694 11.9175C54.3694 12.9977 54.5308 13.9734 54.8535 14.8446C55.1762 15.7157 55.6348 16.4649 56.2293 17.0922C56.8238 17.702 57.5372 18.1724 58.3694 18.5034C59.2017 18.8345 60.1359 19 61.172 19C62.2081 19 63.1423 18.8345 63.9746 18.5034C64.8238 18.1724 65.5457 17.702 66.1402 17.0922C66.7346 16.4649 67.1932 15.7157 67.516 14.8446C67.8387 13.9734 68 12.9977 68 11.9175C68 10.8372 67.8387 9.86152 67.516 8.99037C67.1932 8.10178 66.7346 7.35259 66.1402 6.74278C65.5457 6.11554 64.8238 5.6364 63.9746 5.30536C63.1423 4.95689 62.2081 4.78267 61.172 4.78267C60.1359 4.78267 59.2017 4.95689 58.3694 5.30536C57.5372 5.6364 56.8238 6.11554 56.2293 6.74278C55.6348 7.35259 55.1762 8.10178 54.8535 8.99037C54.5308 9.86152 54.3694 10.8372 54.3694 11.9175Z" fill="black"/>
    </svg>








    <button id="settings_button">
        <img src="assets/overflow.svg" style="height: 24px;">
    </button>
</header>

<section id="settings" class="settings">
    <h2>Settings</h2>
    <p>You can use your own remote JSON feed instead of using the Orllewin default. You'll need to copy the format of the main feed at <a href="https://orllewin.uk/stations.json">orllewin.uk/stations.json</a> precisely.</p>
    <p>Test your JSON radio file by adding as a query string: <a href="https://orllewin.github.io/radio/?https://orllewin.uk/stations.json">example</a>, when you're happy set it below and the url will be saved to local storage, reload the radio and it should use the custom url override.</p>
    <p>If you have issues check the url and make sure your server is setting the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin">CORS header to *</a></p><br>
    <input type="text" id="url_input" name="url">
    <button id="save_url_button" class="control_button">Save</button>
</section>

<section id="grid_holder" class="grid_holder"></section>

<div id="controls">
    <img id="now_playing_icon"><button id="website_button" class="control_button website_button left" onclick="stop()">Website</button><button id="stop_button" class="control_button right" onclick="stop()">stop</button>
</div>

<script src="Radio.js"></script>
</body>
</html>
